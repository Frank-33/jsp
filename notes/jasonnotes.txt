FYI.

-jh-

xq:open-connection -- establishes a connection to the db
  host="hostname"
  port="8005"
  user="username"
  password="secret"
  name="con1" (optional, if not provided assigns default)

xq:set-result -- sets a JSP variable to the result of an XQuery expression
  q="fn:foo()"
  result="varname"
  connection="con1" (optional, if not provided uses default)
  node-as="dom"  (defaults to dom, other options are jdom and string)
  module="bar.xqy"  (optional, if not given no module import)
  module-ns="http://www.w3.org/2003/05/xpath-functions" (optional)

xq:set-single -- same as set-result but only binds one item, error if > 1
  (same as set-result)

xq:execute -- prints the result directly to the output stream
  q="fn:foo()"
  connection="con1" (optional, if not provided uses default)
  module="bar.xqy"  (optional, if not given no module import)
  module-ns="http://www.w3.org/2003/05/xpath-functions" (optional)



public class Query {
  Query(Sring q);
  void setImportModule(String module)
  void setImportModuleNamespace(String ns)
  void setNodesReturnedAs(DOM|JDOM|STRING)
}

public class QueryExecuter {
  QueryExecuter(Connection)
  QueryExecuter(Connection, Logger)
  Object[] execute(Query q)
  String executeString(Query q)
  String[] executeStrings(Query q)
  int executeInt(Query q)
  boolean executeBoolean(Query q)
  InputStream executeStream(Query q) // all nextReader() calls into one
  Iterator executeStreamIterator(Query q) // iterator to get each nextReader()
  close()
}